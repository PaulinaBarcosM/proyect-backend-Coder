<h1 class="main-title">Product List</h1>

<form action="/views/products/view" method="GET" class="filters-form">
    <div class="form-group">
        <label for="category">Categoría:</label>
        <input type="text" id="category" name="category" class="input-select" />
    </div>

    <div class="form-group">
        <label for="price">Precio máximo:</label>
        <input type="number" id="price" name="price" class="input-select" />
    </div>

    <div class="form-group">
        <label for="stock">Stock mínimo:</label>
        <input type="number" id="stock" name="stock" class="input-select" />
    </div>

    <div class="form-group">
        <label for="sort">Ordenar por:</label>
        <select id="sort" name="sort" class="input-select">
            <option value="">Seleccionar</option>
            <option value="asc">Precio (de menor a mayor)</option>
            <option value="desc">Price (de mayor a menor)</option>
        </select>
    </div>

    <div class="form-group">
        <button type="submit" class="styled-button">Aplicar filtros</button>
    </div>
</form>

<ul id="productList">
    {{#each products}}
    <li class="product-card">
        <h3>{{this.title}}</h3>
        <p><strong>${{this.price}}</strong></p>
        <p>{{this.description}}</p>
        <p><strong>Stock:</strong> {{this.stock}} units</p>
        <p><strong>Categoria:</strong> {{this.category}}</p>
        {{#if this.thumbnails.length}}
        <img src="{{this.thumbnails.[0]}}" alt="Product image"
            style="max-width: 100%; height: auto; margin-top: 10px;" />
        {{else}}
        <img src="/img/default-placeholder.webp" alt="No image"
            style="max-width: 100%; height: auto; margin-top: 10px;" />
        {{/if}}
        <a href="/views/products/details/{{this._id}}" class="styled-button" style="margin-top: 10px;">View Details</a>
    </li>
    {{/each}}
</ul>

<div class="pagination">
    {{#if pagination.hasPrevPage}}
    <a href="?page={{pagination.prevPage}}" class="styled-button">Anterior</a>
    {{/if}}

    <span>Page {{pagination.page}} of {{pagination.totalPages}}</span>

    {{#if pagination.hasNextPage}}
    <a href="?page={{pagination.nextPage}}" class="styled-button">Siguiente</a>
    {{/if}}
</div>